<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>CompoLink – Development Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="dev-body">
  <header class="dev-header">
    <div class="dev-header-left">
      <span class="logo-dot"></span>
      <span class="logo-text">CompoLink – Development dashboard</span>
    </div>
    <div class="dev-header-right">
      <span class="badge">Demo mode</span>
    </div>
  </header>

  <main class="dev-layout">
    <!-- LINKERKANT: LIVE MATERIALEN / GOUD KOERS -->
    <aside class="dev-sidebar">
      <section class="sidebar-section">
        <h2>Live material prices</h2>
        <p class="muted">
          Voorbeeld: spotprijzen van metalen (goud, zilver, enz.).
        </p>
        <ul id="dev-market-prices" class="market-prices-list"></ul>
        <p class="market-note">
          Gegevens worden automatisch opgehaald en regelmatig geüpdatet.
        </p>
      </section>
    </aside>

    <!-- RECHTS: WEBSITE SCREEN / UITLEG -->
    <section class="dev-main">
      <h1>CompoLink platform overview</h1>
      <p class="page-intro">
        Dit scherm toont hoe inkopers en leveranciers real-time inzicht krijgen
        in materiaalprijzen, beschikbaarheid én community-updates.
      </p>

      <div class="dev-grid">
        <article class="dev-card">
          <h3>1. Market overview</h3>
          <p>
            In de productieversie zie je hier direct je eigen composiet-
            materialen, beschikbare volumes per leverancier en geprojecteerde
            lead-times op basis van eerdere orders.
          </p>
        </article>

        <article class="dev-card">
          <h3>2. Supply chain analytics</h3>
          <p>
            De analytics-module combineert voorraadgegevens met volatiliteit in
            grondstofprijzen (zoals de goudkoers) om risico's in je supply
            chain zichtbaar te maken.
          </p>
        </article>

        <article class="dev-card">
          <h3>3. Community feed</h3>
          <p>
            Gebruikers kunnen updates delen over vertragingen, nieuwe batches,
            certificaten (bijv. EN9100) en RFQ's. Dit verlaagt de
            informatie-asymmetrie in de keten.
          </p>
        </article>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    © <span id="dev-year"></span> CompoLink – Development demo
  </footer>

  <!-- Simpele JS alleen voor deze demo-pagina -->
  <script>
    // jaar in footer
    document.getElementById("dev-year").textContent =
      new Date().getFullYear();

    const devMarketList = document.getElementById("dev-market-prices");

    async function loadDevMarketPrices() {
      if (!devMarketList) return;
      devMarketList.innerHTML = "<li>Laden van marktdata…</li>";

      try {
        // Voorbeeld van een publieke metals-API (kan je later vervangen door eigen endpoint)
        const res = await fetch("https://api.metals.live/v1/spot");
        if (!res.ok) throw new Error("HTTP " + res.status);
        const data = await res.json();

        // data is bv: [ ["gold", 2345.6], ["silver", 29.1], ... ]
        const symbolsToShow = ["gold", "silver", "platinum", "palladium"];

        devMarketList.innerHTML = "";

        data.forEach((row) => {
          const [symbol, price] = row;
          if (!symbolsToShow.includes(String(symbol).toLowerCase())) return;

          const li = document.createElement("li");
          li.className = "market-price-item";
          li.innerHTML = `
            <span class="material-symbol">${symbol.toUpperCase()}</span>
            <span class="material-price">~ ${Number(price).toFixed(2)} USD</span>
          `;
          devMarketList.appendChild(li);
        });

        if (!devMarketList.children.length) {
          devMarketList.innerHTML =
            "<li>Kon geen geldige prijsdata tonen.</li>";
        }
      } catch (err) {
        console.error("Fout bij ophalen marktdata:", err);
        devMarketList.innerHTML =
          "<li>Fout bij laden van marktdata. Probeer later opnieuw.</li>";
      }
    }

    // direct laden + elke minuut verversen
    loadDevMarketPrices();
    setInterval(loadDevMarketPrices, 60000);
  </script>
</body>
</html>
